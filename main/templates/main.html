{% extends 'base.html' %}
{% load static %}
{% block content %}
{% include 'navbar.html' %}

<div class="min-h-screen bg-[#121212] text-gray-200 pt-24 px-6">
  <div class="max-w-7xl mx-auto">
    <div class="mb-10">
      <h1 class="text-3xl font-bold text-purple-400 mb-2">Football Shop</h1>
      <div class="space-y-1">
        <p><span class="font-medium text-blue-400">Username:</span> {{ name }}</p>
        <p class="text-sm text-gray-400">Last login: {{ last_login }}</p>
      </div>
    </div>

    <div class="mb-8 bg-[#1e1e1e] border border-[#333] p-5 rounded-lg">
      <h2 class="text-lg font-semibold text-gray-300 mb-4">Filter by Category</h2>
      <div class="flex flex-wrap gap-3">
        <a href="{% url 'main:show_main' %}" class="px-4 py-2 text-sm font-medium rounded-md transition duration-200 bg-[#2a2a2a] hover:bg-purple-600 border border-gray-600 hover:border-purple-500">
          All
        </a>
        <a href="?category=shoes" class="px-4 py-2 text-sm font-medium rounded-md transition duration-200 bg-[#2a2a2a] hover:bg-purple-600 border border-gray-600 hover:border-purple-500">
          Shoes
        </a>
        <a href="?category=jerseys" class="px-4 py-2 text-sm font-medium rounded-md transition duration-200 bg-[#2a2a2a] hover:bg-purple-600 border border-gray-600 hover:border-purple-500">
          Jerseys
        </a>
        <a href="?category=ball" class="px-4 py-2 text-sm font-medium rounded-md transition duration-200 bg-[#2a2a2a] hover:bg-purple-600 border border-gray-600 hover:border-purple-500">
          Ball
        </a>
        <a href="?category=socks" class="px-4 py-2 text-sm font-medium rounded-md transition duration-200 bg-[#2a2a2a] hover:bg-purple-600 border border-gray-600 hover:border-purple-500">
          Socks
        </a>
        <a href="?category=bottle" class="px-4 py-2 text-sm font-medium rounded-md transition duration-200 bg-[#2a2a2a] hover:bg-purple-600 border border-gray-600 hover:border-purple-500">
          Bottle
        </a>
        <a href="?category=bandaid" class="px-4 py-2 text-sm font-medium rounded-md transition duration-200 bg-[#2a2a2a] hover:bg-purple-600 border border-gray-600 hover:border-purple-500">
          Bandaid
        </a>
        <a href="?category=bag" class="px-4 py-2 text-sm font-medium rounded-md transition duration-200 bg-[#2a2a2a] hover:bg-purple-600 border border-gray-600 hover:border-purple-500">
          Bag
        </a>
      </div>
    </div>
    {% if not product_list %}
      <div class="bg-[#1e1e1e] border border-[#333] rounded-lg p-12 text-center">
        <div class="w-32 h-32 mx-auto mb-4">
          <img src="{% static 'image/no-product.png' %}" alt="No products available" class="w-full h-full object-contain opacity-80">
        </div>
        <h3 class="text-lg font-semibold text-purple-400 mb-2">No products found</h3>
        <p class="text-gray-400 mb-6">Be the first to add football products to the shop.</p>
        <a href="{% url 'main:create_product' %}" class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 text-white rounded-md hover:from-indigo-500 hover:via-purple-500 hover:to-blue-500 transition">Add Product</a>
      </div>
    {% else %}
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for product in product_list %}
          <article class="bg-[#1e1e1e] border border-[#333] rounded-lg shadow hover:shadow-purple-500/20 transition overflow-hidden">
            <div class="aspect-[16/9] relative overflow-hidden">
              {% if product.thumbnail %}
                <img src="{{ product.thumbnail }}" alt="{{ product.name }}" class="w-full h-full object-cover">
              {% else %}
                <div class="w-full h-full bg-[#2a2a2a]"></div>
              {% endif %}
              <div class="absolute top-3 left-3">
                <span class="px-2 py-0.5 text-xs rounded-md bg-indigo-600 text-white font-medium">
                  {{ product.get_category_display }}
                </span>
              </div>
              <div class="absolute top-3 right-3 flex space-x-2">
                {% if product.is_featured %}
                  <span class="px-2 py-0.5 text-xs rounded-md bg-yellow-600 text-white font-medium">Featured</span>
                {% endif %}
                {% if product.is_expensive_item %}
                  <span class="px-2 py-0.5 text-xs rounded-md bg-red-600 text-white font-medium">Expensive</span>
                {% endif %}
              </div>
            </div>

            <div class="p-5">
              <div class="flex items-center text-sm text-gray-400 mb-3">
                <span>Rp {{ product.price }}</span>
              </div>
              <h3 class="text-lg font-semibold text-purple-300 mb-2 line-clamp-1">
                <a href="{% url 'main:show_products' product.id %}" class="hover:text-purple-400 transition">{{ product.name }}</a>
              </h3>
              <p class="text-gray-400 text-sm line-clamp-3 mb-4">{{ product.description|truncatewords:20 }}</p>

              {% if user.is_authenticated and product.user == user %}
                <div class="flex items-center justify-between border-t border-[#333] pt-4">
                  <a href="{% url 'main:show_products' product.id %}" class="text-indigo-400 hover:text-indigo-300 text-sm font-medium">Read more</a>
                  <div class="flex space-x-3 text-sm">
                    <a href="{% url 'main:edit_product' product.pk %}" class="text-gray-400 hover:text-gray-200">Edit</a>
                    <a href="{% url 'main:delete_product' product.pk %}" class="text-red-500 hover:text-red-400">Delete</a>
                  </div>
                </div>
              {% else %}
                <div class="pt-4 border-t border-[#333]">
                  <a href="{% url 'main:show_products' product.id %}" class="text-indigo-400 hover:text-indigo-300 text-sm font-medium">Read more â†’</a>
                </div>
              {% endif %}
            </div>
          </article>
        {% endfor %}
      </div>
    {% endif %}

  </div>
</div>
{% endblock content %}